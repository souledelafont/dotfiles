tmux attach -t base 2>/dev/null || tmux new -s base 2>/dev/null

export last_changed=`date -r ~/dotfiles/zsh/zshrc.symlink +'%s'`

# if [ "$last_executed" -gt "$last_changed" ] ;then
# 	echo "zshrc has already been run since last change"
# 	exit
# fi

dotfilesdir=~/dotfiles
red="\e[0;31m"
black="\e[0;30m"
green="\e[0;32m"
white="\e[1;37m"
blue="\e[0;34m"
nocolor="\e[0m"

export normal=$nocolor
export success=$green
export warning=$red
export info=$blue

# goto function for loading an exterior config
# 1st arg is name, 2nd is sourcing cmd
loadconf () {
	printf "Loading $1..."
	eval $2
	printf "$success Done$normal\n"
}

# OH-MY-ZSH
export ZSH=$HOME/.oh-my-zsh
export TERM="xterm-256color"
export BULLETTRAIN_RUBY_SHOW='false'
export BULLETTRAIN_VIRTUALENV_SHOW=false
export BULLETTRAIN_VIRTUALENV_FG=black
export BULLETTRAIN_DIR_FG=black
export BULLETTRAIN_PROMPT_CHAR='â†¦'
export BULLETTRAIN_EXEC_TIME_SHOW=true
BULLETTRAIN_DIR_CONTEXT_SHOW=true
if [ ! -f $ZSH/themes/bullet-train.zsh-theme ]; then
	cd $dotfilesdir/zsh/bullet-train-oh-my-zsh-theme
	make install
fi
ZSH_THEME="bullet-train"
plugins=(git history-substring-search)
source $ZSH/oh-my-zsh.sh

# get *.zsh but not in oh-my-zsh/
zshexec=( $(find $dotfilesdir -path $dotfilesdir/zsh/oh-my-zsh.symlink -prune -type f -o -name '*.zsh') )
# source all .zsh files

for zsh in $zshexec; do
	source $zsh
done

# Python path for pip3
export PATH=/Library/Frameworks/Python.framework/Versions/3.3/bin:$PATH
# Virtualenv
# bug: reloading zsh kills deactivate command
# must read wrapper doc...
# export WORKON_HOME=$HOME/.virtualenvs
# export PROJECT_HOME=$HOME
# export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python
# if [ -z "$VIRTUAL_ENV" ]; then
# 	loadconf "virtualenv wrapper" "source `which virtualenvwrapper.sh`"
# fi

# Change capslock to CTRL !
# need to find a way to do this on any machine (ie mac os)
setxkbmap us -option 'caps:ctrl_modifier' 2>/dev/null

export PATH="$PATH:$HOME/.rvm/bin" # Add RVM to PATH for scripting
# export last_executed=`date +'%s'`
